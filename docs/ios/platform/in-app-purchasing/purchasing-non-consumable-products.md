---
title: Xamarin.iOS で非コンシューマブル製品の購入
description: このドキュメントでは、デバイスに関係なく、いつまでもご利用いただけますユーザーが購入した機能となる、Xamarin.iOS での非コンシューマブル製品について説明します。
ms.prod: xamarin
ms.assetid: 635D9CA2-6BCA-53E1-7B10-968029AA3493
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 03/18/2017
ms.openlocfilehash: 060403baf8ac28b9b160632a01471b9828735069
ms.sourcegitcommit: 4b402d1c508fa84e4fc3171a6e43b811323948fc
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "61403219"
---
# <a name="purchasing-non-consumable-products-in-xamarinios"></a>Xamarin.iOS で非コンシューマブル製品の購入

非コンシューマブル製品は、顧客が '所有' されます。 想定されるは、これらが常にアクセスできるようには、自身のデバイスが紛失、盗難、または、新しいものを購入する場合でもです。 これらは、ブック、マガジンのバック ナンバー、ゲーム レベル、写真のフィルター、' pro 機能 ' などに役立ちます。ユーザーが非コンシューマブル製品を購入すると、もう一度購入があることはありません。 誤って、コードでは試してもらうことができます、StoreKit で購入したメッセージが表示されます。

## <a name="non-consumable-products-sample"></a>非コンシューマブル製品サンプル

[InAppPurchaseSample コード](https://developer.xamarin.com/samples/monotouch/StoreKit/)という名前のプロジェクトを含む*NonConsumables*します。 コード サンプルでは、たとえばフォト フィルターを使用して非コンシューマブル製品を実装する方法を示します。 フィルターを購入した後を繰り返し、写真に適用できます。 再購入する必要はありません。   
   
   
   
 この一連のスクリーン ショット: ご購入手続きが示すように、**購入**ボタンが機能をアクティブ化 ボタンになります。   
   
   
   
 [![](purchasing-non-consumable-products-images/image34.png "購入プロセスがこの一連のスクリーン ショットで示すように")](purchasing-non-consumable-products-images/image34.png#lightbox)   
   
   
   
 購入プロセス消耗品; と同じです。主な違いは、アプリケーション コードでの購入を追跡する方法です。 購入ボタンは、のみ、この例では、製品が購入されていない場合は使用できます。 それ以外の場合、ボタンをアクティブに機能自体。   
   
   
   

次の図は、クラスと非コンシューマブル製品の購入を実行するアプリ ストアのサーバー間の相互作用を示しています。   
   
   
   
 [![](purchasing-non-consumable-products-images/image35.png "クラスと非コンシューマブル製品を実行するアプリ ストアのサーバー間の相互作用の購入します。")](purchasing-non-consumable-products-images/image35.png#lightbox)   
   
   
   
 使用できる例の主な違いは、購入が完了すると、ユーザー インターフェイスが再購入を防ぐために更新されています。 この例では、トランザクションが成功の通知がユーザー インターフェイスを更新できるように、**購入**ボタンが機能自体をアクティブにするボタンに変換されます。

## <a name="re-purchasing-non-consumable-products"></a>非コンシューマブル製品の再購入

コードを非表示にしたり購入ボタンの用途を変更して、製品が正常に購入されて、ユーザーがしようとすると、製品をもう一度購入することを防ぐために後通常しないでください。 サンプル アプリケーションは変更することで、**購入**作業フォト フィルターの例は、ボタンにボタンをクリックします。   
   
   
   
 アプリケーションが非コンシューマブル製品が購入済みであるかどうかを判別できない場合があります。

-  アプリケーションが削除され、デバイスに再インストールされた場合、は、(場合を除き、/、ユーザーはバックアップ復元までなど) すべての購入レコードが削除されます。 
-  ユーザーがあるアプリケーションが 2 つ (以上) のデバイスにインストールして、デバイスのいずれかで買い物をします。 その他のデバイスに引き続き表示製品のご購入いただけます。 
-  顧客は、再度このような状況で非コンシューマブル製品を購入すると、App Store は、製品の料金なしでもう一度を受け付けませんでした。 ユーザー インターフェイスは、購入を実行する最初に表示されます (たとえば、確認通知が表示されますおよび Apple ID が必要になります) ただし、ユーザーには、製品が購入済みであることを忠告してメッセージが表示されます、します。  
   
   
   
 このシナリオでは、コード パスは、通常の購入と同じでは正確に、唯一の違いは。

-  ユーザーは、製品をもう一度課金取得はされません。
-  `SKPaymentTransaction`アプリケーションに渡されるオブジェクトが必要があります、`OriginalTransaction`製品が最初に購入したときに生成されたトランザクションを参照するプロパティ。 
-  非コンシューマブル製品を販売しているアプリケーションは、StoreKit のも実装する必要があります**復元**既存の購入を取得するユーザーを支援する機能。 
